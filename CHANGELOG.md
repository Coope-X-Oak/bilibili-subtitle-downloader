# Changelog

## [v2.0.0-alpha] - 2026-01-20
### 🚨 重要变更 (BREAKING CHANGES)
- **项目转型**: 停止维护 UserScript 批量下载工具，转型为技术研究框架。
- **归档**: 所有 v1.x 版本代码及资源已移至 `legacy_v1/` 目录。
- **移除**: 删除了项目根目录下的 UserScript 文件及营销性质的演示图片。

## [v1.14.2] - 2026-01-16
### 优化
- **UI体验**:
  - 视频列表栏 (`.bsd-content`) 现在支持手动拖拽调整高度 (`resize: vertical`)。
  - 视频列表栏默认高度调整为 200px，减少初始屏幕占用 (#Issue-Feat-UI-ListResize)。

## [v1.14.1] - 2026-01-16
### 优化
- **UI体验**:
  - 运行状态栏默认高度增加至 120px，显示更多日志信息。
  - 运行状态栏新增 `resize: vertical` 属性，支持用户手动拖拽调整高度 (#Issue-Feat-UI-Resize)。

## [v1.14] - 2026-01-16
### 新增
- **bilibili_subtitle_downloader.user.js**:
  - 新增“使用须知”按钮与免责声明弹窗，优化界面布局 (#Issue-Feat-UI)。
  - 新增自动刷新功能：进入面板时自动加载视频列表，无需手动点击刷新 (#Issue-Feat-AutoLoad)。

## [v1.13] - 2026-01-16
### 新增
- **bilibili_subtitle_downloader.user.js**:
  - 新增无字幕MD文件生成功能：当视频无字幕且输出格式为MD时，自动生成包含元数据和提示信息的MD文件，UI 状态栏仍会显示 叉号 (❎) (#Issue-Feat-NoSubMD)。生成的 MD 文件名中的 视频标题 部分将被替换为 下载失败。

## [v1.12] - 2026-01-16
### 功能增强
- **元数据结构升级**: 
  - 移除 `bvid` 字段，保持属性表精简。
  - 新增 `collection` 字段：自动识别并记录视频所属的合集名称，便于按系列归档。
  - 新增 `subtitle_url` 字段：记录字幕文件的原始下载链接，便于后续溯源。
- **文件名格式重构**:
  - 全新命名规则：`UP主_合集名_序号_分集标题_MMDDHHmm.format`。
  - 优势：文件系统排序更自然，元数据更丰富，便于不打开文件即可识别内容归属。

## [v1.11] - 2026-01-16
### 新增特性
- **Markdown 增强**: 
  - 针对 `.md` 格式新增 **YAML Front Matter** 支持。
  - 自动提取并写入 `title` (标题), `date` (发布时间), `author` (UP主), `url` (视频链接) 等核心元数据。
  - 完美适配 Obsidian、Notion 等双链笔记软件的“属性”视图，实现自动索引。
- **元数据提取**:
  - 深度集成 B 站 API，精准获取视频的原始发布时间与 UP 主信息。

## [v1.10] - 2026-01-16
### 体验优化
- **文件命名调整**: 文件名时间戳精度提升至分钟，格式更新为 `[序号]标题_MMDDHHmm`，避免短时间内多次下载文件名冲突 (#Feedback1)。
- **视觉反馈增强**: 
  - 选中状态可视化：列表选中行新增浅黄色背景 (`#fffde7`)，操作反馈更清晰。
  - 失败状态警示：下载失败的视频标题将自动变红，醒目提示错误项 (#Feedback2)。

## [v1.09] - 2026-01-16
### 体验优化
- **UI 布局调整**: 将下载状态列移至列表最左侧，宽度极致压缩至 16px 且无边距，视觉更紧凑 (#Feedback1)。
- **错误日志增强**: 批量下载任务结束后，状态栏追加显示详细失败原因及失败序号汇总列表，查漏更便捷 (#Feedback2)。
- **交互逻辑修正**: 点击“选中失败”按钮时，自动先清除当前所有选中项，确保只选中失败视频 (#Feedback3)。

## [v1.08] - 2026-01-16
### 功能增强
- **文件命名规范化**: 采用 `[序号]标题_短时间戳` 格式（如 `[1]课程_0116.srt`），确保文件按视频原始顺序排列 (#Feedback1)。
- **状态可视化**: 列表新增“下载状态”列，实时显示下载成功 (✅) 或失败 (❎) 状态 (#Feedback2)。
- **一键重试辅助**: 新增“选中失败”按钮，支持一键复选所有下载失败的任务以便重试 (#Feedback3)。

## [v1.07] - 2026-01-14
### 修复 & 优化
- **核心修复**: 修复 `ReferenceError: useZip is not defined` 错误，彻底移除废弃的 ZIP 打包逻辑，提升脚本稳定性。
- **稳定性增强**: 
  - 针对 LRC 等格式下载时的 `JSON下载超时` 问题，为 JSON 下载请求增加 3 次自动重试机制。
  - 将 JSON 下载的超时时间从 5秒 延长至 10秒，大幅提升弱网环境下的成功率。
  - 优化错误处理流程，确保单个任务失败不会中断整个批量任务。

## [v1.06] - 2026-01-14
### UI 修复
- **字体强制修正**: 显式指定视频列表使用 `-apple-system`、`Segoe UI` 等无衬线字体栈，解决部分环境下（如 Windows）回退到 Serif 字体的问题。
- **序号对齐优化**: 为视频序号启用 `tabular-nums` 特性，确保数字等宽对齐，视觉更整齐。
- **极致紧凑模式**: 
  - 进一步压缩单行高度至 `20px`。
  - 缩小 Checkbox 尺寸至 `12px`。
  - 减少内边距至 `1px`，最大化屏幕利用率，解决列表“松散”的视觉痛点。

## [v1.05] - 2026-01-14
### UI 样式重构
- **排版优化**: 全面移除表格中的衬线字体 (Serif)，统一使用无衬线字体 (Sans-serif)，视觉更加清爽现代化。
- **色彩统一**: 调整序号与标题的配色，使其视觉观感更加协调统一。
- **紧凑布局**: 极致压缩视频列表的行高与间距，在有限的空间内展示更多内容，提升浏览效率。

## [v1.04] - 2026-01-14
### 功能重构
- **筛选逻辑重做**: 将“全选匹配”重构为“选中筛选结果”，支持通过空格分隔多个关键词进行 **OR (或)** 匹配筛选，大幅提升批量选择效率。
### UI 交互优化
- **界面精简**: 移除顶部的标题栏区域，释放更多可视空间。
- **提示整合**: 将底部的悬浮提示与顶部的警告信息合并，统一展示在面板顶部，更加醒目且整洁。
- **列表展示**: 视频列表优化为“序号”与“标题”双列布局，解决合集视频自带序号导致的显示冗余问题。
- **滚动条优化**: 加宽视频列表的滚动条，提升拖拽操作体验。

### 修复 & 优化
- **UI 性能优化**: 
  - 解决 UI 升级后导致的加载卡顿问题。
  - 将 UI 注入逻辑调整为 `DOMContentLoaded` 后执行，避免阻塞首屏关键渲染。
  - 优化 CSS 动画性能，使用 `will-change` 属性提示浏览器开启 GPU 加速。
  - 精简 `transition` 属性，只针对必要的属性进行动画过渡。
- **更新机制修复**:
  - 显式指定 `@downloadURL` 和 `@updateURL`，确保 Tampermonkey 能正确识别并覆盖更新，解决"更新变新增"的冲突问题。
- **重要声明**:
  - 在面板顶部显眼位置增加黄色警告条，明确告知本工具**仅提取 B 站官方 AI 字幕**，不支持视频转录功能。

## [v1.02] - 2026-01-14
### 新增 & 优化
- **UI 升级**: 
  - 触发按钮采用二次元风格渐变色 (`#FF69B4` to `#00AEEC`)。
  - 增加悬浮动效、阴影与点击反馈，提升视觉辨识度。
  - 按钮文本更新为 "✨AI字幕神器"。
- **功能修复**: 
  - 修复全选匹配的空格分隔功能。
  - 将多关键词筛选逻辑调整为 **OR (或)** 模式（满足任一关键词即可匹配），更符合批量下载场景。
  - 增加输入框 Placeholder 提示与回车键支持。
- **文档更新**: 
  - README 新增 "核心技术揭秘：WBI 签名机制" 章节，解释 WBI 签名在防止虚假数据返回中的作用。



## [v1.01] - 2026-01-14
### 修改
- **bilibili_subtitle_downloader.user.js**:
  - 更新版本号为 1.01。
  - 优化 UI 按钮文本，由 "AI字幕下载" 更改为 "✨AI字幕神器" (Commit: 5ad6721)。
- **README.md**:
  - 更新文档描述，强调 AI 字幕功能 (Commit: 5ad6721)。
  - 更新使用指南中的按钮文本描述 (Commit: 5ad6721)。

## [v1.0] - Initial Release
- 初始版本发布。
- 支持批量下载 B 站视频合集/列表的 AI 中文字幕。
- 支持 MD/TXT/LRC/SRT 格式。
- 集成并发控制与重试机制。
